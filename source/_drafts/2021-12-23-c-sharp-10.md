---
title: Что нового в C# 10
date: 2021-12-23 24:48:06
tags: [c#, c# 10, what's new, VS, VS 2022]
---
# Релиз VS и C# 10
   
8 ноября этого года произошел релиз Visual Studio 2022 и вместе с ним новой версии C# - 10.
В этом посте рассмотрим основные нововведения юбилейной версии C#. Несмотря на то, что каких-то
революционных изменения новый релиз языка не принес, скорее всего каждый сможет найти себе что-то 
по душе. 

### Мелкие нововведения

- Добавлен модификатор `global` директивы импорта, который позволяет импортировать глобально по всему 
проекту. Довольно удобная вещь, таким образом можно, например, создать отдельный файл с глобальными
импортами и не импортировать типы, которые необходимы буквально везде каждый раз в каждом конкретном файле;
- Значимые записи. Теперь записи могут быть структурами. Для этого необходимо добавить ключевое слово
`struct` перед `record`. Довольно наглядно и удобно. Почему это не было реализовано сразу непонятно;
- Добавлен новый тип пространства имен - файловый. Таким образом при объявлении пространства имен можно 
не добавлять фигурные скобки. В таком случае весь код внутри этого файла будет относиться к этому пространству имен.
Что в свою очередь позволяет сократить смещение всего кода по горизонтали, что не может не радовать.
Опять-таки трудно не задаться вопросом, почему это не было реализовано раньше?
- Сопоставление с образцом расширено: теперь можно указывать вложенные поля и свойства:
```
    { Prop1.Prop2: pattern }
``` 
, что по своей сути является копией следующего кода
```
    { Prop1: Prop2: patter }}
```
- Улучшения лямбда выражений:
  - Компилятор теперь может вывести тип лямбда выражения. Например: `var parse = (string s) => int.Parse(s)` компилятор выведет тип для `parse` как `Func<string, int`>;
  - В лямбда выражении теперь можно указать тип возвращаемого выражения: `var choose = object (bool b) => b ? 1 : "two"`. В результате чего переменная `choose` будет иметь тип `Func<bool, object>`;
  - Лямбда выражения теперь поддерживают аттрибуты. Например: 
  ```
    var sum = ([Example(1)] int a, [Example(2), Example(3)] int b) => a + b;
    var inc = [return: Example(1)] (int s) => s++;
  ```
- Интерполирование строк теперь можно использовать с константными строками, если все плейсхолдеры так же являются константными строками;



