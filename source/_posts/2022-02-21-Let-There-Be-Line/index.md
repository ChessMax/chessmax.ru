---
title: Let There Be Line
date: 2022-01-30 21:08:28
mathjax: true
tags:
- Let There Be ...
- Computer Graphics
- CG
- Line
- Draw
- Bresenham
---

# Let There Be ...
Этой статьей я начинаю небольшую серию статей о том, как устроена 3D графика. В этой серии мы не
только попытаемся разобраться как работает [OpenGL](https://en.wikipedia.org/wiki/OpenGL), но и на
практике попробуем реализовать полученные знания, фактически реализуя простой
[Software Renderer](https://en.wikipedia.org/wiki/Software_rendering).

# Цель
Начнем наше совместное путешествие с линий. С обычных 2D линий. Может показаться,
что API для отрисовки линий у нас уже есть и дополнительно ничего для этого
делать не нужно. Но на самом деле это не так. Когда (если вы конечно использовали)
вы используете API для отрисовки линий (неважно какой именно), который выглядит
примерно как функции `moveTo` и `lineTo` - это не какие-то магические функции,
а вполне себе обычные. Ни один монитор не имеет встроенных функций для отрисовки линий. Эти функции
являются часть некоторого графического API. А раз так, то именно с выяснения принципа их работы
(а в дальнейшем и реализации) мы и начнем.

<!-- more -->

# Вводные
Прежде чем начать нам необходимо определиться с тем, что нам доступно. А доступно 
нам, по большому счету, немного. Экран представляет собой двухмерный массив точек - пикселей.
Каждый такой пиксель может иметь некоторый цвет. Само собой мы можем задать
цвет некоторой точки с заданными координатами `(x, y)`. Так же наш экран
имеет ширину и высоту, выраженные так же в пикселях. Для того, что бы понимать где конкретно
находится, например, точка `(1, 1)` нам так же необходимо определить (или задать)
систему координат. По большому счету система координат может быть любой. Более того, мы можем
реализовать переход (перевод) точки из одной системы координат в другую. Обычно (но не обязательно),
если мы работаем с экраном, то центр координат находится в верхнем левом углу. Это довольно удобно
при работе с 2D элементами. Для наших целей (для работы в 3D пространстве), несколько лучше
(да и привычней, если вспомнить школьный курс математики) подойдет система координат в которой центр
системы координат совпадает с центром экрана. При этом ось абсцисс (`Ox`) растет вправо, а ось ординат
(`Oy`) растет вверх.

# Попробуй свои силы
Для реализации нашей задумки мы будем использовать [Canvas API](https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API)
из HTML 5. Для упрощения работы давайте заведем некоторую абстракцию. По аналогии с тем как это реализовано в веб
браузере у нас будет некоторый объект - холст (`Canvas`), который будет иметь минимальный (ранее оговоренный) API:
```js
interface Canvas {
    var width: int;
    var height: int;
    SetPixel(x, y, color):void;
}
```
Таким образом имея ссылку на инстанцию нашего холста мы можем:
- узнать размеры холста;
- закрасить некоторую точку с координатами `(x, y)` в системе координат описанной выше.

Фактически наш холст будет выступать в роли виртуального экрана. А наша первоочередная задача - реализация
функции отрисовки линии со следующей сигнатурой:
```js
DrawLine(from, to, color);
```

Здесь `from` и `to` это координаты начала и конца нашей линии (включительно), а `color` - цвет нашей линии.

// TODO: вставка с кодом для Canvas


Вводные даны, цель поставлена - самое время попробовать свои силы в реализации функции `DrawLine`.
Это не так сложно, как может показаться на первый взгляд. Идеальный алгоритм так же не требуется.
На данном этапе будет более чем достаточно если получится реализовать функцию в любом виде. Если же
буду учтены все пограничные случаи - вообще огонь. Ну а если застряли и непонятно куда двигаться дальше
то в следующем разделе мы разберем алгоритм и его реализацию.

# Алгоритм


$$\begin{equation} \label{eq1}
e=mc^2
\end{equation}$$










{% inject "_posts/2022-02-21-Let-There-Be-Line/example_1.html" %}

